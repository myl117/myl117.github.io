<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="../images/favicon.png" />
<title>Testing in Spring Boot With Junit and Mockito | ( ‚Ä¢‚Äì‚Ä¢) Mo Codes</title>
<meta name="title" content="Testing in Spring Boot With Junit and Mockito" />
<meta name="description" content="In October 2018 and March 2019, Boeing&rsquo;s 737 MAX ‚úàÔ∏è was involved in two fatal crashes resulting in the loss of 346 lives as well as billions in fines, lawsuits and a lasting damage to Boeing&rsquo;s reputation. The cause of these crashes: faulty sensor data caused the MCAS (Maneuvering Characteristics Augmentation System) to activate inappropriately. The software wasn&rsquo;t tested adequately against single-sensor failure.
It&rsquo;s important to note that unit testing alone would not have saved the 737 MAX but had the MCAS system been more rigorously tested, its assumptions may have been questioned with more scrutiny and raised flags earlier." />
<meta name="keywords" content="java,springboot,spring,testing,JUnit," />


<meta property="og:url" content="/testing-in-spring-boot-with-junit-and-mockito/">
  <meta property="og:site_name" content="( ‚Ä¢‚Äì‚Ä¢) Mo Codes">
  <meta property="og:title" content="Testing in Spring Boot With Junit and Mockito">
  <meta property="og:description" content="In October 2018 and March 2019, Boeing‚Äôs 737 MAX ‚úàÔ∏è was involved in two fatal crashes resulting in the loss of 346 lives as well as billions in fines, lawsuits and a lasting damage to Boeing‚Äôs reputation. The cause of these crashes: faulty sensor data caused the MCAS (Maneuvering Characteristics Augmentation System) to activate inappropriately. The software wasn‚Äôt tested adequately against single-sensor failure.
It‚Äôs important to note that unit testing alone would not have saved the 737 MAX but had the MCAS system been more rigorously tested, its assumptions may have been questioned with more scrutiny and raised flags earlier.">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-10-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-10T00:00:00+00:00">
    <meta property="article:tag" content="Java">
    <meta property="article:tag" content="Springboot">
    <meta property="article:tag" content="Spring">
    <meta property="article:tag" content="Testing">
    <meta property="article:tag" content="JUnit">
    <meta property="og:image" content="/images/share.png">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="/images/share.png">
  <meta name="twitter:title" content="Testing in Spring Boot With Junit and Mockito">
  <meta name="twitter:description" content="In October 2018 and March 2019, Boeing‚Äôs 737 MAX ‚úàÔ∏è was involved in two fatal crashes resulting in the loss of 346 lives as well as billions in fines, lawsuits and a lasting damage to Boeing‚Äôs reputation. The cause of these crashes: faulty sensor data caused the MCAS (Maneuvering Characteristics Augmentation System) to activate inappropriately. The software wasn‚Äôt tested adequately against single-sensor failure.
It‚Äôs important to note that unit testing alone would not have saved the 737 MAX but had the MCAS system been more rigorously tested, its assumptions may have been questioned with more scrutiny and raised flags earlier.">




  <meta itemprop="name" content="Testing in Spring Boot With Junit and Mockito">
  <meta itemprop="description" content="In October 2018 and March 2019, Boeing‚Äôs 737 MAX ‚úàÔ∏è was involved in two fatal crashes resulting in the loss of 346 lives as well as billions in fines, lawsuits and a lasting damage to Boeing‚Äôs reputation. The cause of these crashes: faulty sensor data caused the MCAS (Maneuvering Characteristics Augmentation System) to activate inappropriately. The software wasn‚Äôt tested adequately against single-sensor failure.
It‚Äôs important to note that unit testing alone would not have saved the 737 MAX but had the MCAS system been more rigorously tested, its assumptions may have been questioned with more scrutiny and raised flags earlier.">
  <meta itemprop="datePublished" content="2025-10-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-10-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="1457">
  <meta itemprop="image" content="/images/share.png">
  <meta itemprop="keywords" content="Java,Springboot,Spring,Testing,JUnit">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
    --width: 720px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color: #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background-color: #01242e;
      --heading-color: #eee;
      --text-color: #ddd;
      --link-color: #8cc2dd;
      --visited-color: #8b6fcb;
      --code-background-color: #000;
      --code-color: #ddd;
      --blockquote-color: #ccc;
    }
  }

  body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
  }

  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  nav a {
    margin-right: 8px;
  }

  strong,
  b {
    color: var(--heading-color);
  }

  button {
    margin: 0;
    cursor: pointer;
  }

  time {
    font-family: monospace;
    font-style: normal;
    font-size: 15px;
  }

  main {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  hr {
    border: 0;
    border-top: 1px dashed;
  }

  img {
    max-width: 100%;
  }

  code {
    font-family: monospace;
    padding: 2px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: var(--code-color);
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px 0;
    text-align: center;
  }

  .title:hover {
    text-decoration: none;
  }

  .title h1 {
    font-size: 1.5em;
  }

  .inline {
    width: auto !important;
  }

  .highlight,
  .code {
    padding: 1px 15px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: var(--visited-color);
  }

</style>

</head>

<body>
  <header><a href="../" class="title">
  <h2>( ‚Ä¢‚Äì‚Ä¢) Mo Codes</h2>
</a>
<nav>
<a href="../">Home</a>

<a href="../blog/">Blog</a>

</nav>
</header>
  <main>

<h1>Testing in Spring Boot With Junit and Mockito</h1>
<p>
  <i>
    <time datetime='2025-10-10'>
      10 Oct, 2025
    </time>
  </i>
</p>

<content>
  <p>In October 2018 and March 2019, Boeing&rsquo;s 737 MAX ‚úàÔ∏è was involved in two fatal crashes resulting in the loss of 346 lives as well as billions in fines, lawsuits and a lasting damage to Boeing&rsquo;s reputation. The <a href="https://www.youtube.com/watch?v=H2tuKiiznsY">cause of these crashes</a>: faulty sensor data caused the MCAS (Maneuvering Characteristics Augmentation System) to activate inappropriately. The software wasn&rsquo;t tested adequately against single-sensor failure.</p>
<p>It&rsquo;s important to note that unit testing alone would not have saved the 737 MAX but had the MCAS system been more rigorously tested, its assumptions may have been questioned with more scrutiny and raised flags earlier.</p>
<p>Now it&rsquo;s fair to say most of us won&rsquo;t be writing software that controls highly sensitive avionics systems but that doesn&rsquo;t mean our code can&rsquo;t cause some chaos when things go wrong (looking at you, production bugs). In the world of Spring Boot, tools like JUnit and Mockito help us write focused tests to mock out dependencies, verify behavior and make sure our code doesn&rsquo;t panic when it sees unexpected input.</p>
<h2 id="getting-started">Getting Started</h2>
<p><img src="../images/testing-spring-boot-junit-mockito/meme.jpg" alt="Spring Beans meme"></p>
<p>Today, we&rsquo;ll explore how to add tests to an existing Spring Boot application. Feel free to adapt the examples to fit your own projects. For this walkthrough, I&rsquo;ll be adding tests to a small authentication microservice üîí I&rsquo;ve been developing.</p>
<p>To get started, we&rsquo;ll add the Spring Boot Starter Test dependency to our project.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#062873;font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>  <span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#062873;font-weight:bold">&lt;scope&gt;</span>test<span style="color:#062873;font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>  <span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#062873;font-weight:bold">&lt;/dependencies&gt;</span>
</span></span></code></pre></div><p>This starter bundle includes:</p>
<ul>
<li>JUnit 5 (Jupiter)</li>
<li>Mockito</li>
<li>Spring Test</li>
<li>AssertJ</li>
<li>Hamcrest</li>
</ul>
<p>Here&rsquo;s a breakdown of what each package does individually:</p>
<h3 id="1-junit-5-jupiter">1. JUnit 5 (Jupiter)</h3>
<p>This is the most well known testing framework in the Java ecosystem. It provides annotations like <em>@Test</em>, <em>@BeforeEach</em>, <em>@AfterEach</em> and the core engine to run unit tests. Here we are asserting that 1+1 equals 2:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">myTest</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb">  </span>assertEquals(2,<span style="color:#bbb"> </span>1<span style="color:#bbb"> </span><span style="color:#666">+</span><span style="color:#bbb"> </span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="2-mockito">2. Mockito</h3>
<p>Mockito is a mocking framework which allows you to mock objects to replace real dependencies.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>List<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span><span style="color:#bbb"> </span>mockList<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>Mockito.<span style="color:#4070a0">mock</span>(List.<span style="color:#4070a0">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>Mockito.<span style="color:#4070a0">when</span>(mockList.<span style="color:#4070a0">size</span>()).<span style="color:#4070a0">thenReturn</span>(5);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span>assertEquals(5,<span style="color:#bbb"> </span>mockList.<span style="color:#4070a0">size</span>());<span style="color:#bbb">
</span></span></span></code></pre></div><p>Whenever size is called on the list, 5 is returned even though the list is empty. This is called stubbing.</p>
<h3 id="3-spring-test">3. Spring Test</h3>
<p>Spring Test allows you to test Spring components like controllers and services by starting a Spring application context (all your beans, configurations, etc). Spring Test also includes utilities to mock HTTP requests such as MockMVC.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#555;font-weight:bold">@Autowired</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">private</span><span style="color:#bbb"> </span>MockMvc<span style="color:#bbb"> </span>mockMvc;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb"></span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">testController</span>()<span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#bbb">  </span>mockMvc.<span style="color:#4070a0">perform</span>(get(<span style="color:#4070a0">&#34;/ping&#34;</span>))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#bbb">    </span>.<span style="color:#4070a0">andExpect</span>(status().<span style="color:#4070a0">isOk</span>())<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#bbb">    </span>.<span style="color:#4070a0">andExpect</span>(content().<span style="color:#4070a0">string</span>(<span style="color:#4070a0">&#34;pong&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="4-assertj">4. AssertJ</h3>
<p>Makes assertions more readable and expressive compared to JUnit&rsquo;s built in assertions.</p>
<p>Here&rsquo;s the difference:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>List<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span><span style="color:#bbb"> </span>names<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>List.<span style="color:#4070a0">of</span>(<span style="color:#4070a0">&#34;Alice&#34;</span>,<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Bob&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>assertEquals(2,<span style="color:#bbb"> </span>names.<span style="color:#4070a0">size</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span>assertTrue(names.<span style="color:#4070a0">contains</span>(<span style="color:#4070a0">&#34;Alice&#34;</span>));<span style="color:#bbb">
</span></span></span></code></pre></div><p>The above JUnit assertions work fine but can get verbose and the order of arguments (expected, actual) sometimes confuses people.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>List<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span><span style="color:#bbb"> </span>names<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>List.<span style="color:#4070a0">of</span>(<span style="color:#4070a0">&#34;Alice&#34;</span>,<span style="color:#bbb"> </span><span style="color:#4070a0">&#34;Bob&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>assertThat(names)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb">  </span>.<span style="color:#4070a0">hasSize</span>(2)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb">  </span>.<span style="color:#4070a0">contains</span>(<span style="color:#4070a0">&#34;Alice&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb">  </span>.<span style="color:#4070a0">doesNotContain</span>(<span style="color:#4070a0">&#34;Eve&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>With AssertJ, the assertions API is more fluent and reads easily like natural language as well as supporting chaining of multiple assertions.</p>
<h3 id="5-hamcrest">5. Hamcrest</h3>
<p>Hamcrest serves a similar purpose to AssertJ making assertions more expressive and readable than the default JUnit ones.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#60a0b0;font-style:italic">// JUnit</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>assertEquals(5,<span style="color:#bbb"> </span>result);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">// Hamcrest</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span>assertThat(result,<span style="color:#bbb"> </span>is(5));<span style="color:#bbb">
</span></span></span></code></pre></div><p>The Hamcrest assertion reads more like a sentence:¬† &ldquo;assert that result is 5&rdquo;.</p>
<h2 id="writing-tests">Writing Tests</h2>
<p>Now that we understand the core libraries needed to write tests for our Java applications and their purposes, let‚Äôs put them into action. You can find the full code for the authentication microservice I‚Äôll be working with <a href="https://github.com/myl117/authservice">here</a>.</p>
<p>Specifically, we‚Äôll be testing the signup functionality, which is primarily implemented in two files: <em>SignupService.java</em> and <em>SignupController.java</em>.</p>
<p>Before writing any tests, we need to establish the folder and file structure. A best practice is to mirror the structure of the main application in the test directory. This means for every class under <em>src/main/java/&hellip;</em>, there should be a corresponding test class under <em>src/test/java/&hellip;</em> in the same package path.</p>
<h3 id="example">Example</h3>
<p>Main code:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>src<span style="color:#666">/</span>main<span style="color:#666">/</span>java<span style="color:#666">/</span>com<span style="color:#666">/</span>example<span style="color:#666">/</span>app<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="">‚îú‚îÄ‚îÄ</span> controller<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserController.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="">‚îú‚îÄ‚îÄ</span> service<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserService.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="">‚îú‚îÄ‚îÄ</span> repository<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserRepository.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="">‚îî‚îÄ‚îÄ</span> model<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span>    <span style="">‚îî‚îÄ‚îÄ</span> User.java
</span></span></code></pre></div><p>Tests (mirroring the structure):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>src<span style="color:#666">/</span>test<span style="color:#666">/</span>java<span style="color:#666">/</span>com<span style="color:#666">/</span>example<span style="color:#666">/</span>app<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="">‚îú‚îÄ‚îÄ</span> controller<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserControllerTest.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="">‚îú‚îÄ‚îÄ</span> service<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserServiceTest.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="">‚îú‚îÄ‚îÄ</span> repository<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> UserRepositoryTest.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="">‚îî‚îÄ‚îÄ</span> integration<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span>    <span style="">‚îî‚îÄ‚îÄ</span> UserFlowIntegrationTest.java
</span></span></code></pre></div><p>Below is the structure of my initial tests folder (before adding more tests):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>src<span style="color:#666">/</span>test<span style="color:#666">/</span>java<span style="color:#666">/</span>com<span style="color:#666">/</span>myl117<span style="color:#666">/</span>authservice<span style="color:#666">/</span>authservice<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="">‚îú‚îÄ‚îÄ</span> controller<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="">‚îÇ</span>   <span style="">‚îî‚îÄ‚îÄ</span> SignupControllerTests.java
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="">‚îî‚îÄ‚îÄ</span> service<span style="color:#666">/</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="">‚îî‚îÄ‚îÄ</span> SignupServiceTests.java
</span></span></code></pre></div><p>With our test files in place, it‚Äôs time to start writing tests.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#007020;font-weight:bold">package</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">com.myl117.authservice.authservice.service</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.ArgumentMatchers.any</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.ArgumentMatchers.anyString</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.ArgumentMatchers.eq</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.Mockito.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import static</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.assertj.core.api.Assertions.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.junit.jupiter.api.BeforeEach</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.junit.jupiter.api.DisplayName</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.junit.jupiter.api.Test</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.junit.jupiter.api.extension.ExtendWith</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.Mock</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.mockito.junit.jupiter.MockitoExtension</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">org.springframework.jdbc.core.JdbcTemplate</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">com.myl117.authservice.authservice.dto.SignupRequest</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#0e84b5;font-weight:bold">com.myl117.authservice.authservice.exception.UserAlreadyExistsException</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#bbb"></span><span style="color:#555;font-weight:bold">@ExtendWith</span>(MockitoExtension.<span style="color:#4070a0">class</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#bbb"></span><span style="color:#555;font-weight:bold">@DisplayName</span>(<span style="color:#4070a0">&#34;SignupService Unit Tests&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#bbb"></span><span style="color:#007020;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">SignupServiceTests</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@Mock</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#bbb">  </span><span style="color:#007020;font-weight:bold">private</span><span style="color:#bbb"> </span>JdbcTemplate<span style="color:#bbb"> </span>jdbcTemplate;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@Mock</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#bbb">  </span><span style="color:#007020;font-weight:bold">private</span><span style="color:#bbb"> </span>EmailService<span style="color:#bbb"> </span>emailService;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#bbb">  </span><span style="color:#007020;font-weight:bold">private</span><span style="color:#bbb"> </span>JwtService<span style="color:#bbb"> </span>jwtService;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span><span style="color:#bbb">  </span><span style="color:#007020;font-weight:bold">private</span><span style="color:#bbb"> </span>SignupService<span style="color:#bbb"> </span>signupService;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#bbb">   </span><span style="color:#555;font-weight:bold">@BeforeEach</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span><span style="color:#bbb">    </span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">setUp</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#bbb">      </span>jwtService<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>JwtService();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span><span style="color:#bbb">      </span>signupService<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupService(jdbcTemplate,<span style="color:#bbb"> </span>jwtService,<span style="color:#bbb"> </span>emailService);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@DisplayName</span>(<span style="color:#4070a0">&#34;Should successfully signup a new user with hashed password&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span><span style="color:#bbb">  </span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">shouldSignupUserSuccessfully</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span><span style="color:#bbb">    </span>SignupRequest<span style="color:#bbb"> </span>req<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupRequest();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#bbb">    </span>req.<span style="color:#4070a0">setName</span>(<span style="color:#4070a0">&#34;John&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span><span style="color:#bbb">    </span>req.<span style="color:#4070a0">setEmail</span>(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span><span style="color:#bbb">    </span>req.<span style="color:#4070a0">setPassword</span>(<span style="color:#4070a0">&#34;totallysecurepassword&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span><span style="color:#bbb">    </span>when(jdbcTemplate.<span style="color:#4070a0">queryForObject</span>(anyString(),<span style="color:#bbb"> </span>eq(Integer.<span style="color:#4070a0">class</span>),<span style="color:#bbb"> </span>any())).<span style="color:#4070a0">thenReturn</span>(0);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span><span><span style="color:#bbb">    </span>signupService.<span style="color:#4070a0">Signup</span>(req);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span><span><span style="color:#bbb">    </span>verify(jdbcTemplate).<span style="color:#4070a0">update</span>(anyString(),<span style="color:#bbb"> </span>eq(<span style="color:#4070a0">&#34;John&#34;</span>),<span style="color:#bbb"> </span>eq(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>),<span style="color:#bbb"> </span>anyString(),<span style="color:#bbb"> </span>eq(<span style="color:#4070a0">&#34;PENDING_VERIFICATION&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span><span><span style="color:#bbb">    </span>verify(emailService).<span style="color:#4070a0">sendVerificationEmail</span>(eq(<span style="color:#4070a0">&#34;John&#34;</span>),<span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>),<span style="color:#bbb"> </span>anyString());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span><span><span style="color:#bbb">  </span><span style="color:#555;font-weight:bold">@DisplayName</span>(<span style="color:#4070a0">&#34;Should throw UserAlreadyExistsException if email is already in use&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span><span><span style="color:#bbb">  </span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">shouldThrowIfUserAlreadyExists</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58</span><span><span style="color:#bbb">    </span>SignupRequest<span style="color:#bbb"> </span>req<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupRequest();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59</span><span><span style="color:#bbb">    </span>req.<span style="color:#4070a0">setEmail</span>(<span style="color:#4070a0">&#34;exists@example.com&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61</span><span><span style="color:#bbb">    </span>when(jdbcTemplate.<span style="color:#4070a0">queryForObject</span>(anyString(),<span style="color:#bbb"> </span>eq(Integer.<span style="color:#4070a0">class</span>),<span style="color:#bbb"> </span>any())).<span style="color:#4070a0">thenReturn</span>(1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63</span><span><span style="color:#bbb">    </span>assertThatThrownBy(()<span style="color:#bbb"> </span><span style="color:#666">-&gt;</span><span style="color:#bbb"> </span>signupService.<span style="color:#4070a0">Signup</span>(req))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64</span><span><span style="color:#bbb">      </span>.<span style="color:#4070a0">isInstanceOf</span>(UserAlreadyExistsException.<span style="color:#4070a0">class</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65</span><span><span style="color:#bbb">      </span>.<span style="color:#4070a0">hasMessage</span>(<span style="color:#4070a0">&#34;Email is already in use&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66</span><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67</span><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>That was a lot of code. Let‚Äôs now walk through what it does.</p>
<p>The first few lines import external testing libraries as well as custom project classes such as SignupRequest and UserAlreadyExistsException.</p>
<h3 id="annotations">Annotations</h3>
<p>Throughout our code, you‚Äôll see some annotations that tell JUnit/Mockito how to behave.</p>
<p><strong>@ExtendWith(MockitoExtension.class)</strong> - Tells JUnit to enable Mockito‚Äôs mocking system for this test.</p>
<p><strong>@DisplayName(&quot;&hellip;&quot;)</strong> - Gives a human-readable name to a test or class when printed in reports.</p>
<p><strong>@Mock</strong> - Creates a fake version of that object (no real database, no real email sending).</p>
<p><strong>@BeforeEach</strong> - Runs the <em>setUp()</em> method before every test which is good for setting up fresh test data.</p>
<p><strong>@Test</strong> - Marks a method as an actual test case.</p>
<h3 id="test-1-successful-signup">Test 1: Successful Signup</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#555;font-weight:bold">@DisplayName</span>(<span style="color:#4070a0">&#34;Should successfully signup a new user with hashed password&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">shouldSignupUserSuccessfully</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb">  </span>SignupRequest<span style="color:#bbb"> </span>req<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupRequest();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb">  </span>req.<span style="color:#4070a0">setName</span>(<span style="color:#4070a0">&#34;John&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#bbb">  </span>req.<span style="color:#4070a0">setEmail</span>(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#bbb">  </span>req.<span style="color:#4070a0">setPassword</span>(<span style="color:#4070a0">&#34;totallysecurepassword&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Here we make a fake signup request. Then:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>when(jdbcTemplate.<span style="color:#4070a0">queryForObject</span>(anyString(),<span style="color:#bbb"> </span>eq(Integer.<span style="color:#4070a0">class</span>),<span style="color:#bbb"> </span>any())).<span style="color:#4070a0">thenReturn</span>(0);<span style="color:#bbb">
</span></span></span></code></pre></div><p>This means: <em>‚ÄúPretend that when the database checks if the email exists it finds 0 users‚Äù</em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>signupService.<span style="color:#4070a0">Signup</span>(req);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Finally, we verify that the service tried to insert the user into the database and told the email system to send a verification email.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>verify(jdbcTemplate).<span style="color:#4070a0">update</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb">  </span>anyString(),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;John&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb">  </span>anyString(),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;PENDING_VERIFICATION&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span>verify(emailService).<span style="color:#4070a0">sendVerificationEmail</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;John&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb">  </span>eq(<span style="color:#4070a0">&#34;john.doe@example.com&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb">  </span>anyString()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>That confirms the signup logic behaves correctly when a new user signs up.</p>
<h3 id="test-2-email-already-exists">Test 2: Email Already Exists</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#555;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#555;font-weight:bold">@DisplayName</span>(<span style="color:#4070a0">&#34;Should throw UserAlreadyExistsException if email is already in use&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span><span style="color:#902000">void</span><span style="color:#bbb"> </span><span style="color:#06287e">shouldThrowIfUserAlreadyExists</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb">  </span>SignupRequest<span style="color:#bbb"> </span>req<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupRequest();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb">  </span>req.<span style="color:#4070a0">setEmail</span>(<span style="color:#4070a0">&#34;exists@example.com&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#bbb">  </span>when(jdbcTemplate.<span style="color:#4070a0">queryForObject</span>(anyString(),<span style="color:#bbb"> </span>eq(Integer.<span style="color:#4070a0">class</span>),<span style="color:#bbb"> </span>any())).<span style="color:#4070a0">thenReturn</span>(1);<span style="color:#bbb">
</span></span></span></code></pre></div><p>This time, we fake the database saying ‚Äú1 user already exists with that email‚Äù and then we expect the signup to fail:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>assertThatThrownBy(()<span style="color:#bbb"> </span><span style="color:#666">-&gt;</span><span style="color:#bbb"> </span>signupService.<span style="color:#4070a0">Signup</span>(req))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb">  </span>.<span style="color:#4070a0">isInstanceOf</span>(UserAlreadyExistsException.<span style="color:#4070a0">class</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb">  </span>.<span style="color:#4070a0">hasMessage</span>(<span style="color:#4070a0">&#34;Email is already in use&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>So if the <em>Signup()</em> method throws the correct exception, the test passes.</p>
<h2 id="web-layer-testing">Web Layer Testing</h2>
<p>Now that we‚Äôve tested our service and confirmed it works as expected, let‚Äôs move on to testing the web layer üåê of our signup system, specifically the HTTP aspects: routes, status codes and responses.</p>
<p>We‚Äôll use Spring‚Äôs MockMvc, which we discussed earlier, to simulate real HTTP requests without starting an actual server.</p>
<h3 id="setting-up-mockmvc">Setting up MockMvc:</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>MockitoAnnotations.<span style="color:#4070a0">openMocks</span>(<span style="color:#007020;font-weight:bold">this</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>signupController<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>SignupController(signupService);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span>mockMvc<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>MockMvcBuilders.<span style="color:#4070a0">standaloneSetup</span>(signupController).<span style="color:#4070a0">build</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span>objectMapper<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#007020;font-weight:bold">new</span><span style="color:#bbb"> </span>ObjectMapper();<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li>MockMvc - lets you fake HTTP requests to your controller.</li>
<li>SignupService - mocked, so no real DB or logic runs.</li>
<li>ObjectMapper - converts Java objects to JSON (for the request body).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>doNothing().<span style="color:#4070a0">when</span>(signupService).<span style="color:#4070a0">Signup</span>(req);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Pretend the signup call works fine ‚Äî no exceptions. Then:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mockMvc.<span style="color:#4070a0">perform</span>(post(<span style="color:#4070a0">&#34;/api/auth/signup&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span>.<span style="color:#4070a0">contentType</span>(MediaType.<span style="color:#4070a0">APPLICATION_JSON</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span>.<span style="color:#4070a0">content</span>(objectMapper.<span style="color:#4070a0">writeValueAsString</span>(req)))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span>.<span style="color:#4070a0">andExpect</span>(status().<span style="color:#4070a0">isOk</span>())<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb"></span>.<span style="color:#4070a0">andExpect</span>(content().<span style="color:#4070a0">string</span>(<span style="color:#4070a0">&#34;Successfully created user&#34;</span>));<span style="color:#bbb">
</span></span></span></code></pre></div><p>This sends a POST request to /api/auth/signup and expects a 200 OK response with the message ‚ÄúSuccessfully created user‚Äù</p>
<p>Finally, we can run our tests with Maven using the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mvn <span style="color:#007020">test</span>
</span></span></code></pre></div><p>This command will compile your project, execute all the tests and display the results in the console. It‚Äôs a quick way to verify that your tests pass helping you catch issues early and keep your Spring application reliable as it grows.</p>
<p>That concludes our overview of unit and web layer testing in Spring. While there‚Äôs much more to explore, this guide provides a solid foundation. With MockMvc and a few simple mocks, you can confidently ensure your endpoints behave as expected without running the full application.</p>
<p>Thanks for reading!</p>

</content>



<p>
  
  <a href="../blog/java/">#Java</a>
  
  <a href="../blog/springboot/">#Springboot</a>
  
  <a href="../blog/spring/">#Spring</a>
  
  <a href="../blog/testing/">#Testing</a>
  
  <a href="../blog/junit/">#JUnit</a>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo  ï‚Ä¢·¥•‚Ä¢ î Bear</a>
</footer>

  
</body>

</html>
